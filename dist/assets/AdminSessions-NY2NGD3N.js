import{u as p,r as a,j as s}from"./index-gIg6QK8U.js";function y(){const{fetchWithAuth:o,user:f}=p(),[n,x]=a.useState(""),[r,c]=a.useState([]),[l,i]=a.useState(!1),[d,t]=a.useState(null),m=async()=>{if(!n){t({type:"error",text:"User ID is required"});return}i(!0),t(null);try{const e=await o({url:`/admin/users/${encodeURIComponent(n)}/sessions`,method:"get"}),u=e&&e.sessions?e.sessions:e&&e.sessions||[];c(Array.isArray(u)?u:[])}catch(e){t({type:"error",text:e?.message||"Failed to fetch sessions"})}finally{i(!1)}},h=async()=>{if(!n){t({type:"error",text:"User ID is required"});return}if(confirm(`Invalidate all sessions for user ${n}?`)){i(!0),t(null);try{await o({url:`/admin/users/${encodeURIComponent(n)}/sessions/invalidate`,method:"post",data:{}}),t({type:"success",text:"Sessions invalidated"}),c([])}catch(e){t({type:"error",text:e?.message||"Failed to invalidate sessions"})}finally{i(!1)}}};return s.jsxs("div",{className:"p-6 bg-white rounded shadow-sm",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Admin: User Sessions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm",children:"User ID"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:n,onChange:e=>x(e.target.value),placeholder:"Enter UserID (GUID) or numeric id"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:m,disabled:l,className:"px-3 py-2 bg-indigo-600 text-white rounded",children:l?"Loading...":"Fetch Sessions"}),s.jsx("button",{onClick:h,disabled:l,className:"px-3 py-2 bg-red-600 text-white rounded",children:"Invalidate All"})]}),d&&s.jsx("div",{className:`text-sm ${d.type==="error"?"text-red-600":"text-green-600"}`,children:d.text}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",children:"Sessions"}),r&&r.length>0?s.jsx("ul",{className:"list-disc pl-5",children:r.map(e=>s.jsx("li",{children:e},e))}):s.jsx("div",{className:"text-xs text-slate-500",children:"No sessions found."})]})]})]})}export{y as default};
